{"version":3,"file":"js/846.c6cd442b.js","mappings":"0RAGA,MAAMA,EAAU,mCACVC,EAAU,CAAEC,iBAAiB,GAEtBC,EAA2BC,GAA8CC,EAAAA,EAAAA,KAAW,GAAGL,oBAA2B,IAAKI,EAAKE,MAAOC,0BAA6BN,GAChKO,EAAkBJ,GAAkCC,EAAAA,EAAAA,KAAW,GAAGL,oBAA2BI,EAAKH,GAElGQ,EAAiCL,GAA2BC,EAAAA,EAAAA,KAAW,GAAGL,0BAAiC,IAAKI,EAAKE,MAAOC,0BAA6BN,GACzJS,EAAwBN,GAAoCC,EAAAA,EAAAA,KAAW,GAAGL,0BAAiCI,EAAKH,GAEhHU,EAAO,IAAMN,EAAAA,EAAAA,IAAU,GAAGL,SAAgBC,GAC1CW,EAAS,IAAMP,EAAAA,EAAAA,KAAW,GAAGL,WAAkB,CAAC,EAAGC,E,4ICHhE,GAA4BY,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,YACRC,MAAMC,GAER,MAAMC,EAAmC,CAAEC,OAAQ,OAAQC,MAAO,KAAMC,KAAM,MAExEC,GAASC,EAAAA,EAAAA,MAETC,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAWD,EAAAA,EAAAA,IAAI,IACfE,GAAaF,EAAAA,EAAAA,IAAc,IAC3BG,GAAYC,EAAAA,EAAAA,KAAS,IAAMF,EAAWG,MAAMC,KAAIC,GAAUd,EAASc,IAAU,KAAKC,KAAK,SAE7FC,EAAAA,EAAAA,KAAUC,UACN,IACI,MAAM,KAAEC,SAAexB,EAAAA,EAAAA,MACvBY,EAAMM,MAAQM,EAAKZ,MACnBE,EAASI,MAAQM,EAAKV,SACtBC,EAAWG,MAAQM,EAAKC,W,CAC1B,MAAOC,GACLC,QAAQC,IAAIF,GACZG,MAAM,cACNnB,EAAOoB,KAAK,c,KAIpB,MAAMC,EAAeR,UACjB,UACUtB,EAAAA,EAAAA,K,CACR,MAAOyB,GACL,CACF,QACEhB,EAAOoB,KAAK,c,GAIpB,MAAO,CAACE,EAAUC,KAChB,MAAMC,GAAwBC,EAAAA,EAAAA,IAAkB,cAEhD,OAAQC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CC,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,uBAAwBP,EAAKQ,OAAOC,aAC3D,EACDC,EAAAA,EAAAA,GAAoB,KAAM,MAAMC,EAAAA,EAAAA,IAAiB7B,EAASI,OAAQ,IAClEwB,EAAAA,EAAAA,GAAoB,IAAK,KAAM,WAAYC,EAAAA,EAAAA,IAAiB/B,EAAMM,OAAQ,IAC1EwB,EAAAA,EAAAA,GAAoB,IAAK,KAAM,QAASC,EAAAA,EAAAA,KAAiBC,EAAAA,EAAAA,IAAO5B,IAAa,IAC7E6B,EAAAA,EAAAA,KAAaD,EAAAA,EAAAA,IAAOE,EAAAA,IAAS,CAC3BR,OAAOC,EAAAA,EAAAA,IAAgBP,EAAKQ,OAAOO,KACnCC,OAAO,EACPC,KAAM,QACNC,KAAM,UACNC,QAASpB,GACR,CACDqB,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,WAEnBC,EAAG,GACF,EAAG,CAAC,WACPV,EAAAA,EAAAA,IAAaX,EAAuB,CAAEsB,GAAI,kBAAoB,CAC5DJ,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,KAAiBX,EAAAA,EAAAA,IAAiB,MAAQ,iBAE5CY,EAAG,KAEJ,EAAE,CAEP,IC1EA,GAAgB,UAAY,4BAA4B,IAAM,uB,QCE9D,MAAME,EAAa,CAAC,EAEpBA,EAAW,UAAY,EAGvB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,eAAeD,KAE1E,O","sources":["webpack://cute-owner/./src/apis/Auth.ts","webpack://cute-owner/./src/views/Dashboard.vue?02f8","webpack://cute-owner/./src/views/Dashboard.vue?4aae","webpack://cute-owner/./src/views/Dashboard.vue"],"sourcesContent":["import axios from 'axios'\r\nimport { RegistrationResponseJSON, AuthenticationResponseJSON } from '@simplewebauthn/typescript-types'\r\n\r\nconst BASEURL = `${process.env.VUE_APP_API_DOMAIN || ''}/auth`\r\nconst OPTIONS = { withCredentials: true }\r\n\r\nexport const generateRegisterOptions = (arg: { email: string, username: string, }) => axios.post(`${BASEURL}/register/option`, { ...arg, rp_id: process.env.VUE_APP_RP_ID }, OPTIONS)\r\nexport const verifyRegister = (arg: RegistrationResponseJSON) => axios.post(`${BASEURL}/register/verify`, arg, OPTIONS)\r\n\r\nexport const generateAuthenticationOptions = (arg: { email: string }) => axios.post(`${BASEURL}/authentication/option`, { ...arg, rp_id: process.env.VUE_APP_RP_ID }, OPTIONS)\r\nexport const verifyAuthentication = (arg: AuthenticationResponseJSON) => axios.post(`${BASEURL}/authentication/verify`, arg, OPTIONS)\r\n\r\nexport const info = () => axios.get(`${BASEURL}/info`, OPTIONS)\r\nexport const logout = () => axios.post(`${BASEURL}/logout`, {}, OPTIONS)\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, withCtx as _withCtx, createVNode as _createVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { info, logout } from '@/apis/Auth'\r\nimport { onMounted, ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { Button } from 'vant'\r\nimport { computed } from '@vue/reactivity'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Dashboard',\n  setup(__props) {\n\r\nconst groupMap: Record<string, string> = { rabbit: '兔子大帝', owner: '主人', user: '兔粉' }\r\n\r\nconst router = useRouter()\r\n\r\nconst email = ref('')\r\nconst username = ref('')\r\nconst userGroups = ref<string[]>([])\r\nconst groupText = computed(() => userGroups.value.map(group => (groupMap[group] || '')).join(', '))\r\n\r\nonMounted(async () => {\r\n    try {\r\n        const { data } = await info()\r\n        email.value = data.email\r\n        username.value = data.username\r\n        userGroups.value = data.user_groups\r\n    } catch (e) {\r\n        console.log(e)\r\n        alert('取得個人資訊失敗QQ')\r\n        router.push('/auth/login')\r\n    }\r\n})\r\n\r\nconst handleLogout = async () => {\r\n    try {\r\n        await logout()\r\n    } catch (e) {\r\n        // ...\r\n    } finally {\r\n        router.push('/auth/login')\r\n    }\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_RouterLink = _resolveComponent(\"RouterLink\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"centralize-container\", _ctx.$style.container])\n  }, [\n    _createElementVNode(\"h2\", null, _toDisplayString(username.value), 1),\n    _createElementVNode(\"p\", null, \"Email: \" + _toDisplayString(email.value), 1),\n    _createElementVNode(\"p\", null, \"身分： \" + _toDisplayString(_unref(groupText)), 1),\n    _createVNode(_unref(Button), {\n      class: _normalizeClass(_ctx.$style.btn),\n      round: true,\n      size: \"small\",\n      type: \"primary\",\n      onClick: handleLogout\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" 登出 \")\n      ]),\n      _: 1\n    }, 8, [\"class\"]),\n    _createVNode(_component_RouterLink, { to: \"/rabbit-status\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(_toDisplayString('<=') + \" 去看看兔兔的狀態吧\")\n      ]),\n      _: 1\n    })\n  ], 2))\n}\n}\n\n})","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Dashboard_container_fYpx_\",\"btn\":\"Dashboard_btn_yYcEt\"};","import script from \"./Dashboard.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=ts&setup=true\"\n\nconst cssModules = {}\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=87247336&lang=scss&module=true\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"C:\\\\Users\\\\immor\\\\Documents\\\\SourceTree\\\\cute-owner\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__cssModules',cssModules]])\n\nexport default __exports__"],"names":["BASEURL","OPTIONS","withCredentials","generateRegisterOptions","arg","axios","rp_id","process","verifyRegister","generateAuthenticationOptions","verifyAuthentication","info","logout","_defineComponent","__name","setup","__props","groupMap","rabbit","owner","user","router","useRouter","email","ref","username","userGroups","groupText","computed","value","map","group","join","onMounted","async","data","user_groups","e","console","log","alert","push","handleLogout","_ctx","_cache","_component_RouterLink","_resolveComponent","_openBlock","_createElementBlock","class","_normalizeClass","$style","container","_createElementVNode","_toDisplayString","_unref","_createVNode","Button","btn","round","size","type","onClick","default","_withCtx","_createTextVNode","_","to","cssModules","__exports__"],"sourceRoot":""}