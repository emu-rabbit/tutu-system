{"version":3,"file":"js/924.1a90bdff.js","mappings":"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","sources":["webpack://cute-owner/./src/compositions/useInterval.ts","webpack://cute-owner/./src/components/PaddedText.vue?0a51","webpack://cute-owner/./src/components/PaddedText.vue","webpack://cute-owner/./src/components/ProgressBar.vue?4a31","webpack://cute-owner/./src/components/ProgressBar.vue?8297","webpack://cute-owner/./src/components/ProgressBar.vue","webpack://cute-owner/./src/compositions/useProgress.ts","webpack://cute-owner/./src/compositions/useState.ts","webpack://cute-owner/./src/utils/timer.ts","webpack://cute-owner/./src/views/RabbitLoading.vue?22ce","webpack://cute-owner/./src/views/RabbitLoading.vue?e01e","webpack://cute-owner/./src/views/RabbitLoading.vue"],"sourcesContent":["import { onBeforeMount, onMounted } from 'vue'\r\n\r\nexport default function (callback: () => void, millisecond: number) {\r\n    let id: number | null = null\r\n\r\n    onMounted(() => {\r\n        id = setInterval(callback, millisecond)\r\n    })\r\n\r\n    onBeforeMount(() => {\r\n        if (id) clearInterval(id)\r\n    })\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, unref as _unref, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport useInterval from '@/compositions/useInterval'\r\nimport { computed, ref } from '@vue/reactivity'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PaddedText',\n  props: {\n    maxLength: { default: 3 },\n    paddingChar: { default: '.' },\n    disable: { type: Boolean, default: false }\n  },\n  setup(__props: any) {\n\nconst props = __props as { maxLength: number, paddingChar: string, disable: boolean };\n\r\nconst paddingLength = ref(0)\r\nconst paddingText = computed(() => props.paddingChar.repeat(paddingLength.value))\r\n\r\n\r\n\r\nuseInterval(() => {\r\n    paddingLength.value = (paddingLength.value + 1) % (props.maxLength + 1)\r\n}, 1000)\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"p\", null, [\n    _renderSlot(_ctx.$slots, \"default\"),\n    _createTextVNode(\" \" + _toDisplayString(__props.disable ? '' : _unref(paddingText)), 1)\n  ]))\n}\n}\n\n})","import script from \"./PaddedText.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PaddedText.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ProgressBar',\n  props: {\n    progress: null,\n    color: null\n  },\n  setup(__props: any) {\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass(_ctx.$style.outer)\n  }, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass(_ctx.$style.inner),\n      style: _normalizeStyle({\r\n                width: `${__props.progress}%`,\r\n                backgroundColor: __props.color ? __props.color : '#ff7777'\r\n            })\n    }, null, 6)\n  ], 2))\n}\n}\n\n})","// extracted by mini-css-extract-plugin\nexport default {\"outer\":\"ProgressBar_outer_CMRWt\",\"inner\":\"ProgressBar_inner_oBVGQ\"};","import script from \"./ProgressBar.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=ts&setup=true\"\n\nconst cssModules = {}\nimport style0 from \"./ProgressBar.vue?vue&type=style&index=0&id=3991a761&lang=scss&module=true\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"C:\\\\Users\\\\immor\\\\Documents\\\\SourceTree\\\\cute-owner\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__cssModules',cssModules]])\n\nexport default __exports__","import { ref } from 'vue'\r\n\r\n/** Integer in 0 ~ 100 */\r\ntype ProgressRange = InRange<0, 100>\r\n\r\nexport default function () {\r\n    const progress = ref<ProgressRange>(0)\r\n    const message = ref('')\r\n\r\n    const setProgressStatus = (arg: {\r\n        progress: ProgressRange,\r\n        message: string\r\n    }) => {\r\n        progress.value = arg.progress\r\n        message.value = arg.message\r\n    }\r\n\r\n    return {\r\n        progress,\r\n        message,\r\n        setProgressStatus\r\n    }\r\n}\r\n","import { computed, shallowRef } from 'vue'\r\nimport useProgress from './useProgress'\r\n\r\ntype StateData<T> = {\r\n    progress: InRange<0, 100>,\r\n    message: string,\r\n    state: T\r\n}\r\n\r\nexport default function <State> (states: StateData<State>[]) {\r\n    const { progress, message } = useProgress()\r\n    const stateInner = shallowRef(states[0].state)\r\n    const state = computed({\r\n        get: () => stateInner.value,\r\n        set: (newState: State) => {\r\n            stateInner.value = newState\r\n            const data = states.find(d => d.state === newState)\r\n            if (!data) {\r\n                // console.warn(`State not found in data ${newState}`)\r\n                return\r\n            }\r\n            progress.value = data.progress\r\n            message.value = data.message\r\n        }\r\n    })\r\n    state.value = states[0].state\r\n\r\n    return {\r\n        progress,\r\n        message,\r\n        state\r\n    }\r\n}\r\n","const wait = (milliseconds: number): Promise<void> => new Promise(resolve => setTimeout(resolve, milliseconds))\r\n\r\nexport {\r\n    wait\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createElementVNode as _createElementVNode } from \"vue\"\n\nimport PaddedText from '@/components/PaddedText.vue'\r\nimport ProgressBar from '@/components/ProgressBar.vue'\r\nimport useState from '@/compositions/useState'\r\nimport { wait } from '@/utils/timer'\r\nimport { computed } from '@vue/reactivity'\r\nimport { onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\ntype State = 'init' | 'loading' | 'still-working' | 'sleeping' | 'request-waked' | 'waked' | 'retrying' | 'done' | 'post'\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'RabbitLoading',\n  setup(__props) {\n\r\nconst { progress, message, state } = useState<State>([{\r\n    progress: 0,\r\n    message: '兔子收到了主人的呼喚',\r\n    state: 'init'\r\n}, {\r\n    progress: 30,\r\n    message: '兔子努力搬運資料中',\r\n    state: 'loading'\r\n}, {\r\n    progress: 60,\r\n    message: '兔子依舊在努力搬運中',\r\n    state: 'still-working'\r\n}, {\r\n    progress: 60,\r\n    message: '阿，兔子睡著了Zzzzzzz',\r\n    state: 'sleeping'\r\n}, {\r\n    progress: 60,\r\n    message: '兔子伸伸懶腰',\r\n    state: 'waked'\r\n}, {\r\n    progress: 80,\r\n    message: '兔子繼續努力中',\r\n    state: 'retrying'\r\n}, {\r\n    progress: 100,\r\n    message: '兔子搬完東西了！',\r\n    state: 'done'\r\n}, {\r\n    progress: 100,\r\n    message: '其實.....根本沒有東西要搬 (( 惡魔兔燦笑',\r\n    state: 'post'\r\n}])\r\nconst router = useRouter()\r\n\r\nconst slept = computed(() => state.value === 'sleeping' || state.value === 'request-waked')\r\nconst finished = computed(() => state.value === 'done' || state.value === 'post')\r\nconst paddingDisable = computed(() => slept.value)\r\nconst progressColor = computed(() => slept.value ? '#88888844' : '')\r\n\r\nconst ms = 5000\r\nlet wakeResolver: (value?: unknown) => void\r\n\r\nonMounted(async () => {\r\n    await wait(ms)\r\n    state.value = 'loading'\r\n    await wait(ms)\r\n    state.value = 'still-working'\r\n    await wait(ms)\r\n    state.value = 'sleeping'\r\n    await wait(ms)\r\n    state.value = 'request-waked'\r\n    await new Promise(resolve => { wakeResolver = resolve })\r\n    state.value = 'waked'\r\n    await wait(ms)\r\n    state.value = 'retrying'\r\n    await wait(ms)\r\n    state.value = 'done'\r\n    await wait(ms)\r\n    state.value = 'post'\r\n    await wait(ms)\r\n    router.push('/home')\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass(_ctx.$style.container)\n  }, [\n    _createElementVNode(\"div\", null, [\n      _createVNode(PaddedText, {\n        class: _normalizeClass(_ctx.$style.message),\n        disable: _unref(paddingDisable) || _unref(finished)\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(_unref(message)) + \" \", 1),\n          (_unref(state) === 'request-waked')\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_unref(wakeResolver) && _unref(wakeResolver)(...args)))\n              }, \"叫醒這隻兔子\"))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }, 8, [\"class\", \"disable\"]),\n      (!_unref(slept) && _unref(state) !== 'post')\n        ? (_openBlock(), _createBlock(ProgressBar, {\n            key: 0,\n            class: _normalizeClass(_ctx.$style.bar),\n            progress: _unref(progress),\n            color: _unref(progressColor)\n          }, null, 8, [\"class\", \"progress\", \"color\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ], 2))\n}\n}\n\n})","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"RabbitLoading_container_M23TQ\",\"message\":\"RabbitLoading_message_HpnDq\",\"bar\":\"RabbitLoading_bar_uP2J5\"};","import script from \"./RabbitLoading.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./RabbitLoading.vue?vue&type=script&lang=ts&setup=true\"\n\nconst cssModules = {}\nimport style0 from \"./RabbitLoading.vue?vue&type=style&index=0&id=55f49b4e&lang=scss&module=true\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"C:\\\\Users\\\\immor\\\\Documents\\\\SourceTree\\\\cute-owner\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__cssModules',cssModules]])\n\nexport default __exports__"],"names":["callback","millisecond","id","onMounted","setInterval","onBeforeMount","clearInterval","_defineComponent","__name","props","maxLength","default","paddingChar","disable","type","Boolean","setup","__props","paddingLength","ref","paddingText","computed","repeat","value","useInterval","_ctx","_cache","_openBlock","_createElementBlock","_renderSlot","$slots","_createTextVNode","_toDisplayString","_unref","__exports__","progress","color","class","_normalizeClass","$style","outer","_createElementVNode","inner","style","_normalizeStyle","width","backgroundColor","cssModules","message","setProgressStatus","arg","states","useProgress","stateInner","shallowRef","state","get","set","newState","data","find","d","wait","milliseconds","Promise","resolve","setTimeout","useState","router","useRouter","slept","finished","paddingDisable","progressColor","ms","wakeResolver","async","push","container","_createVNode","PaddedText","_withCtx","key","onClick","args","_createCommentVNode","_","_createBlock","ProgressBar","bar"],"sourceRoot":""}