{"version":3,"file":"js/749.f0991ee0.js","mappings":"0RAGA,MAAMA,EAAU,mCACVC,EAAU,CAAEC,iBAAiB,GAEtBC,EAA2BC,GAA8CC,EAAAA,EAAAA,KAAW,GAAGL,oBAA2B,IAAKI,EAAKE,MAAOC,0BAA6BN,GAChKO,EAAkBJ,GAAkCC,EAAAA,EAAAA,KAAW,GAAGL,oBAA2BI,EAAKH,GAElGQ,EAAiCL,GAA2BC,EAAAA,EAAAA,KAAW,GAAGL,0BAAiC,IAAKI,EAAKE,MAAOC,0BAA6BN,GACzJS,EAAwBN,GAAoCC,EAAAA,EAAAA,KAAW,GAAGL,0BAAiCI,EAAKH,GAEhHU,EAAO,IAAMN,EAAAA,EAAAA,IAAU,GAAGL,SAAgBC,GAC1CW,EAAS,IAAMP,EAAAA,EAAAA,KAAW,GAAGL,WAAkB,CAAC,EAAGC,E,kICLhE,GAA4BY,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,YACRC,MAAMC,GAER,MAAMC,GAASC,EAAAA,EAAAA,MAETC,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAWD,EAAAA,EAAAA,IAAI,KAErBE,EAAAA,EAAAA,KAAUC,UACN,IACI,MAAM,KAAEC,SAAeb,EAAAA,EAAAA,MACvBQ,EAAMM,MAAQD,EAAKL,MACnBE,EAASI,MAAQD,EAAKH,Q,CACxB,MAAOK,GACLC,QAAQC,IAAIF,GACZG,MAAM,a,KAId,MAAMC,EAAeP,UACjB,UACUX,EAAAA,EAAAA,K,CACR,MAAOc,GACL,CACF,QACET,EAAOc,KAAK,c,GAIpB,MAAO,CAACC,EAAUC,MACRC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDC,EAAAA,EAAAA,GAAoB,IAAK,MAAMC,EAAAA,EAAAA,IAAiBhB,EAASI,OAAQ,IACjEW,EAAAA,EAAAA,GAAoB,IAAK,MAAMC,EAAAA,EAAAA,IAAiBlB,EAAMM,OAAQ,IAC9DW,EAAAA,EAAAA,GAAoB,SAAU,CAAEE,QAASR,GAAgB,QAG7D,IC1CA,MAAMS,EAAc,EAEpB,O","sources":["webpack://cute-owner/./src/apis/Auth.ts","webpack://cute-owner/./src/views/Dashboard.vue?02f8","webpack://cute-owner/./src/views/Dashboard.vue"],"sourcesContent":["import axios from 'axios'\r\nimport { RegistrationResponseJSON, AuthenticationResponseJSON } from '@simplewebauthn/typescript-types'\r\n\r\nconst BASEURL = `${process.env.VUE_APP_API_DOMAIN || ''}/auth`\r\nconst OPTIONS = { withCredentials: true }\r\n\r\nexport const generateRegisterOptions = (arg: { email: string, username: string, }) => axios.post(`${BASEURL}/register/option`, { ...arg, rp_id: process.env.VUE_APP_RP_ID }, OPTIONS)\r\nexport const verifyRegister = (arg: RegistrationResponseJSON) => axios.post(`${BASEURL}/register/verify`, arg, OPTIONS)\r\n\r\nexport const generateAuthenticationOptions = (arg: { email: string }) => axios.post(`${BASEURL}/authentication/option`, { ...arg, rp_id: process.env.VUE_APP_RP_ID }, OPTIONS)\r\nexport const verifyAuthentication = (arg: AuthenticationResponseJSON) => axios.post(`${BASEURL}/authentication/verify`, arg, OPTIONS)\r\n\r\nexport const info = () => axios.get(`${BASEURL}/info`, OPTIONS)\r\nexport const logout = () => axios.post(`${BASEURL}/logout`, {}, OPTIONS)\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { info, logout } from '@/apis/Auth'\r\nimport { onMounted, ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Dashboard',\n  setup(__props) {\n\r\nconst router = useRouter()\r\n\r\nconst email = ref('')\r\nconst username = ref('')\r\n\r\nonMounted(async () => {\r\n    try {\r\n        const { data } = await info()\r\n        email.value = data.email\r\n        username.value = data.username\r\n    } catch (e) {\r\n        console.log(e)\r\n        alert('取得個人資訊失敗QQ')\r\n    }\r\n})\r\n\r\nconst handleLogout = async () => {\r\n    try {\r\n        await logout()\r\n    } catch (e) {\r\n        // ...\r\n    } finally {\r\n        router.push('/auth/login')\r\n    }\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"p\", null, _toDisplayString(username.value), 1),\n    _createElementVNode(\"p\", null, _toDisplayString(email.value), 1),\n    _createElementVNode(\"button\", { onClick: handleLogout }, \"登出\")\n  ]))\n}\n}\n\n})","import script from \"./Dashboard.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["BASEURL","OPTIONS","withCredentials","generateRegisterOptions","arg","axios","rp_id","process","verifyRegister","generateAuthenticationOptions","verifyAuthentication","info","logout","_defineComponent","__name","setup","__props","router","useRouter","email","ref","username","onMounted","async","data","value","e","console","log","alert","handleLogout","push","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","onClick","__exports__"],"sourceRoot":""}