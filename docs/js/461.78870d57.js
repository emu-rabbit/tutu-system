"use strict";(self["webpackChunkcute_owner"]=self["webpackChunkcute_owner"]||[]).push([[461],{1740:function(e,l,a){a.d(l,{f:function(){return s},r:function(){return c}});var o=a(6943);const n="https://api.mausurabbit.xyz/manager",t={withCredentials:!0},c=()=>o.Z.get(`${n}/users`,t),s=e=>o.Z.post(`${n}/user/group`,e)},461:function(e,l,a){a.r(l),a.d(l,{default:function(){return J}});var o=a(3396),n=a(7139),t=a(4870),c=a(1740),s=a(5488),u=a(1404),r=a(610),i=a(5323),d=a(253),p=a(3444);const[b,m]=(0,r["do"])("checkbox-group"),v={max:i.Or,disabled:Boolean,iconSize:i.Or,direction:String,modelValue:(0,i.Ce)(),checkedColor:String},h=Symbol(b);var k=(0,o.aZ)({name:b,props:v,emits:["change","update:modelValue"],setup(e,{emit:l,slots:a}){const{children:n,linkChildren:t}=(0,d.$E)(h),c=e=>l("update:modelValue",e),s=(e={})=>{"boolean"===typeof e&&(e={checked:e});const{checked:l,skipDisabled:a}=e,o=n.filter((e=>!!e.props.bindGroup&&(e.props.disabled&&a?e.checked.value:null!=l?l:!e.checked.value))),t=o.map((e=>e.name));c(t)};return(0,o.YP)((()=>e.modelValue),(e=>l("change",e))),(0,p.F)({toggleAll:s}),(0,d.aM)((()=>e.modelValue)),t({props:e,updateValue:c}),()=>{var l;return(0,o.Wm)("div",{class:m([e.direction])},[null==(l=a.default)?void 0:l.call(a)])}}});const g=(0,u.n)(k);a(7658);var f=a(2220),S=a(6048),V=a(3649);const y={name:i.Vg,shape:(0,i.SQ)("round"),disabled:Boolean,iconSize:i.Or,modelValue:i.Vg,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var _=(0,o.aZ)({props:(0,f.l7)({},y,{bem:(0,i.ir)(Function),role:String,parent:Object,checked:Boolean,bindGroup:i.J5}),emits:["click","toggle"],setup(e,{emit:l,slots:a}){const n=(0,t.iH)(),c=l=>{if(e.parent&&e.bindGroup)return e.parent.props[l]},s=(0,o.Fl)((()=>c("disabled")||e.disabled)),u=(0,o.Fl)((()=>c("direction"))),r=(0,o.Fl)((()=>{const l=e.checkedColor||c("checkedColor");if(l&&e.checked&&!s.value)return{borderColor:l,backgroundColor:l}})),i=a=>{const{target:o}=a,t=n.value,c=t===o||(null==t?void 0:t.contains(o));s.value||!c&&e.labelDisabled||l("toggle"),l("click",a)},d=()=>{const{bem:l,shape:t,checked:u}=e,i=e.iconSize||c("iconSize");return(0,o.Wm)("div",{ref:n,class:l("icon",[t,{disabled:s.value,checked:u}]),style:{fontSize:(0,S.Nn)(i)}},[a.icon?a.icon({checked:u,disabled:s.value}):(0,o.Wm)(V.JO,{name:"success",style:r.value},null)])},p=()=>{if(a.default)return(0,o.Wm)("span",{class:e.bem("label",[e.labelPosition,{disabled:s.value}])},[a.default()])};return()=>{const l="left"===e.labelPosition?[p(),d()]:[d(),p()];return(0,o.Wm)("div",{role:e.role,class:e.bem([{disabled:s.value,"label-disabled":e.labelDisabled},u.value]),tabindex:s.value?void 0:0,"aria-checked":e.checked,onClick:i},[l])}}});const[w,C]=(0,r["do"])("checkbox"),x=(0,f.l7)({},y,{bindGroup:i.J5});var G=(0,o.aZ)({name:w,props:x,emits:["change","update:modelValue"],setup(e,{emit:l,slots:a}){const{parent:n}=(0,d.NB)(h),t=l=>{const{name:a}=e,{max:o,modelValue:t}=n.props,c=t.slice();if(l){const l=o&&c.length>=o;l||c.includes(a)||(c.push(a),e.bindGroup&&n.updateValue(c))}else{const l=c.indexOf(a);-1!==l&&(c.splice(l,1),e.bindGroup&&n.updateValue(c))}},c=(0,o.Fl)((()=>n&&e.bindGroup?-1!==n.props.modelValue.indexOf(e.name):!!e.modelValue)),s=(a=!c.value)=>{n&&e.bindGroup?t(a):l("update:modelValue",a)};return(0,o.YP)((()=>e.modelValue),(e=>l("change",e))),(0,p.F)({toggle:s,props:e,checked:c}),(0,d.aM)((()=>e.modelValue)),()=>(0,o.Wm)(_,(0,o.dG)({bem:C,role:"checkbox",parent:n,checked:c.value,onToggle:s},e),(0,f.ei)(a,["default","icon"]))}});const U=(0,u.n)(G);var W=a(9545),z=a(544),Z=a(8304);const F={class:"centralize-container"},O=(0,o._)("h1",null,"兔兔發禮物",-1);var $=(0,o.aZ)({__name:"UserGroupSet",setup(e){const l=(0,t.iH)(null),a=(0,t.iH)(["rabbit","owner","fan","user"]),u=(0,o.Fl)((()=>l.value?.map((e=>({text:e.username,value:e.id}))))),r=(0,t.iH)(null),i=(0,t.iH)([]),d=async()=>{try{l.value=(await(0,c.r)()).data}catch(e){(0,s.l)("無法取得使用者名單或物品列表")}};(0,o.bv)(d),(0,o.m0)((async()=>{i.value=l.value?.find((e=>e.id===r.value?.value))?.userGroups||[]}));const p=async()=>{if(r.value)try{await(0,c.f)({id:r.value.value,groups:i.value}),(0,s.l)("成功"),await d()}catch(e){(0,s.l)("失敗QQ")}};return(e,l)=>((0,o.wg)(),(0,o.iD)("div",F,[O,(0,o.Wm)(z.Z,{value:r.value,"onUpdate:value":l[0]||(l[0]=e=>r.value=e),class:(0,n.C_)(e.$style.control),options:(0,t.SU)(u),label:"使用者"},null,8,["value","class","options"]),(0,o.Wm)((0,t.SU)(g),{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),class:(0,n.C_)(e.$style.checkboxes)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.value,(e=>((0,o.wg)(),(0,o.j4)((0,t.SU)(U),{key:e,name:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)((0,t.SU)(Z.c)(e)),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue","class"]),(0,o.Wm)((0,t.SU)(W.zx),{class:(0,n.C_)(e.$style.control),round:!0,type:"primary",disabled:!r.value,onClick:p},{default:(0,o.w5)((()=>[(0,o.Uk)(" 發送 ")])),_:1},8,["class","disabled"])]))}}),D={control:"UserGroupSet_control_dWS4K",checkboxes:"UserGroupSet_checkboxes_A5PXZ"},H=a(89);const P={};P["$style"]=D;const B=(0,H.Z)($,[["__cssModules",P]]);var J=B}}]);